/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'co.edu.unal.java-application-conventions'
}

version = '1.0.0'

dependencies {
    implementation 'org.apache.commons:commons-text'
    implementation project(':database-keyword-commerce-analysis')
    implementation project(':deprecated-extensions-analysis')
    implementation project(':commerce-incompatibilities-analysis')
    implementation project(':third-party-libraries-analysis')
    implementation project(':java-commerce-analysis')
    implementation project(':javascript-commerce-analysis')
    implementation project(':utilities')
}

application {
    // Define the main class for the application.
    mainClass = 'co.edu.unal.app.App'
}

run {
    standardInput = System.in
}

apply plugin: 'java'

jar {
    manifest {
        attributes "Main-Class": "co.edu.unal.app.App"
    }

    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
}

task fatJar(type: Jar) {
    manifest {
        attributes 'Main-Class': 'co.edu.unal.app.App'
    }
    archiveClassifier = "all"
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
//    canBeResolved = true
    from {
//        configurations.implementation.collect { it.isDirectory() ? it : zipTree(it) }
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
    with jar
}

//task customFatJar(type: Jar) {
//    manifest {
//        attributes 'Main-Class': 'co.edu.unal.app.App'
//    }
//    baseName = 'all-in-one-jar'
//    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
//    from { configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) } }
//    with jar
//}

//buildscript {
//    repositories {
//        mavenCentral()
//        gradlePluginPortal()
//    }
//    dependencies {
//        classpath "gradle.plugin.com.github.johnrengelman:shadow:7.1.2"
//    }
//}
//
//apply plugin: 'java'
//apply plugin: 'com.github.johnrengelman.shadow'

